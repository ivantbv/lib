(()=>{"use strict";document.querySelector(".form-container");const e=document.querySelectorAll('input[name="read"]');let t=0;class o{constructor(o,d,n,a,l){this.title=o,this.author=d,this.pages=n,this.read=a,e.forEach((e=>{e.checked&&(a=e.value)})),this.id=++t}}let d=[];const n=document.querySelector("#title"),a=document.querySelector("#author"),l=document.querySelector("#pages");let c;const s=document.querySelector(".append-book"),r=()=>{localStorage.setItem("myLibrary",JSON.stringify(d))};function i(e){const o=document.createElement("div");o.classList.add("book-card");const n=document.createElement("div");n.classList.add("book-title");const a=document.createElement("div");a.classList.add("book-author");const l=document.createElement("div");l.classList.add("book-pages");const c=document.createElement("div");c.classList.add("book-read");const i=document.createElement("button");i.classList.add("delete-book"),i.textContent="X";const u=document.createElement("button");u.classList.add("read-button"),u.textContent="Read Status",n.textContent=e.title,a.textContent=e.author,l.textContent=e.pages,c.textContent=e.read,r(),i.setAttribute("data-id",t),u.setAttribute("data-id",t),i.addEventListener("click",(t=>{d.splice(d.indexOf(e),1),m(),r(),console.log(d,"from del btn")})),u.addEventListener("click",(t=>{"Read"===e.read?e.read="Not read":"Not read"===e.read&&(e.read="Read"),m(),r(),console.log(d,"from toggle read btn")})),o.appendChild(n),o.appendChild(a),o.appendChild(l),o.appendChild(c),o.appendChild(i),o.appendChild(u),s.appendChild(o),console.log(i,"del btnrender")}function m(){const e=document.querySelector(".append-book"),t=document.querySelectorAll(".book-card");t.forEach((t=>e.removeChild(t))),console.log(t,"from createBook func");for(let e=0;e<d.length;e++)i(d[e])}(()=>{if(localStorage.myLibrary){const e=JSON.parse(localStorage.getItem("myLibrary"));d=e,m()}else m()})(),(new class{constructor(){this.modal=document.getElementById("myModal"),this.modalBtn=document.getElementById("myBtn"),this.modalSpan=document.getElementsByClassName("close")[0]}openModal(){this.modalBtn.addEventListener("click",(()=>{this.modal.style.display="block"})),this.modalSpan.addEventListener("click",(()=>{this.modal.style.display="none"})),window.addEventListener("click",(e=>{e.target==this.modal&&(this.modal.style.display="none")}))}}).openModal(),document.querySelector(".add-book").addEventListener("click",(()=>{(()=>{for(const t of e)t.checked&&(c=t.value);const t=new o(`${n.value}`,`by ${a.value}`,`${l.value}`,`${c}`);d.push(t),console.log(t.id,d,"from add book to libr func")})(),m(),console.log(d)}))})();