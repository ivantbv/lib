(()=>{"use strict";document.querySelector(".form-container");const e=document.querySelectorAll('input[name="read"]');let t=0;class o{constructor(o,n,d,a,c){this.title=o,this.author=n,this.pages=d,this.read=a,e.forEach((e=>{e.checked&&(a=e.value)})),this.id=++t}}let n=[];const d=document.querySelector("#title"),a=document.querySelector("#author"),c=document.querySelector("#pages");let l;const r=document.querySelector(".append-book"),s=()=>{localStorage.setItem("myLibrary",JSON.stringify(n))},i=e=>{const t=document.createElement("div");t.classList.add("book-card");const o=document.createElement("div");o.classList.add("book-title");const d=document.createElement("div");d.classList.add("book-author");const a=document.createElement("div");a.classList.add("book-pages");const c=document.createElement("div");c.classList.add("book-read");const l=document.createElement("button");l.classList.add("delete-book"),l.textContent="X";const i=document.createElement("button");i.classList.add("read-button"),i.textContent="Read Status",o.textContent=e.title,d.textContent=e.author,a.textContent=e.pages,c.textContent=e.read,s(),l.addEventListener("click",(t=>{n.splice(n.indexOf(e),1),u(n),s(),console.log(n,"from del btn")})),i.addEventListener("click",(t=>{"Read"===e.read?e.read="Not read":"Not read"===e.read&&(e.read="Read"),u(n),s(),console.log(n,"from toggle read btn")})),t.appendChild(o),t.appendChild(d),t.appendChild(a),t.appendChild(c),t.appendChild(l),t.appendChild(i),r.appendChild(t)};function u(e){const t=document.querySelector(".append-book"),o=document.querySelectorAll(".book-card");o.forEach((e=>t.removeChild(e))),console.log(o,"from createBook func");for(let t=0;t<e.length;t++)i(e[t])}(()=>{if(localStorage.myLibrary){const e=JSON.parse(localStorage.getItem("myLibrary"));n=e,u(n)}else u(n)})();const m=document.querySelector(".searchBar"),h=document.querySelector("#book-name"),p=(document.querySelector("#book-author"),document.querySelectorAll('input[name="filter-search"]'));(new class{constructor(){this.modal=document.getElementById("myModal"),this.modalBtn=document.getElementById("myBtn"),this.modalSpan=document.getElementsByClassName("close")[0]}openModal(){this.modalBtn.addEventListener("click",(()=>{this.modal.style.display="block"})),this.modalSpan.addEventListener("click",(()=>{this.modal.style.display="none"})),window.addEventListener("click",(e=>{e.target==this.modal&&(this.modal.style.display="none")}))}}).openModal(),document.querySelector(".add-book").addEventListener("click",(()=>{(()=>{for(const t of e)t.checked&&(l=t.value);const t=new o(`${d.value}`,`by ${a.value}`,`${c.value}`,`${l}`);n.push(t),console.log(t.id,n,"from add book to libr func")})(),u(n),console.log(n)})),p.forEach((e=>e.addEventListener("change",(e=>{m.value="",u(n)})))),m.addEventListener("keyup",(e=>{const t=e.target.value.toLowerCase();u(n.filter((e=>h.checked?e.title.toLowerCase().includes(t):e.author.toLowerCase().includes(t))))}))})();